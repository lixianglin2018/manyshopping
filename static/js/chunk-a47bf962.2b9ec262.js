(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a47bf962"],{1148:function(t,a,e){"use strict";var n=e("a691"),i=e("1d80");t.exports="".repeat||function(t){var a=String(i(this)),e="",s=n(t);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(a+=a))1&s&&(e+=a);return e}},"1d5b":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"customerFlow chartPage",on:{click:t.closeByDialog}},[e("AppHeader",[e("p",{attrs:{slot:"center"},slot:"center"},[t._v("客单客流走势")])]),e("van-tabs",{attrs:{animated:"",sticky:"","offset-top":t.offsetTop},on:{click:t.tabOnClick},model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},[e("van-tab",{attrs:{title:"客单"}},[e("div",{staticClass:"contrast"},[e("van-tabs",{on:{click:t.salesTabClick},model:{value:t.salesActive,callback:function(a){t.salesActive=a},expression:"salesActive"}},[e("van-tab",{attrs:{title:"公历同期"}}),e("van-tab",{attrs:{title:"农历同期"}})],1)],1),e("div",{staticClass:"filters"},[e("div",{staticClass:"date-filters"},[e("input",{attrs:{type:"text",readonly:""},domProps:{value:t.calendar.display},on:{click:function(a){return a.stopPropagation(),t.openByDialog(a)}}})]),e("transition",{attrs:{name:"fade"}},[t.calendar.show?e("div",{staticClass:"calendar-dialog"},[e("div",{staticClass:"calendar-dialog-mask",on:{click:t.closeByDialog}}),e("div",{staticClass:"calendar-dialog-body"},[e("calendar",{attrs:{range:t.calendar.range,zero:t.calendar.zero,lunar:t.calendar.lunar,value:t.calendar.value},on:{select:t.calendar.select}})],1)]):t._e()])],1),e("div",{staticClass:"myChart-box"},[e("div",{ref:"myChart_sku",staticClass:"myChart",staticStyle:{width:"375px",height:"360px"}})]),e("div",{staticClass:"chart-text"},[e("p",[t._v("客单均值: "+t._s(t.totalSum))]),e("p",[t._v("同期客单均值: "+t._s(t.tqTotalSum))])])]),e("van-tab",{attrs:{title:"客流"}},[e("div",{staticClass:"contrast"},[e("van-tabs",{on:{click:t.profitTabClick},model:{value:t.profitActive,callback:function(a){t.profitActive=a},expression:"profitActive"}},[e("van-tab",{attrs:{title:"公历同期"}}),e("van-tab",{attrs:{title:"农历同期"}})],1)],1),e("div",{staticClass:"filters"},[e("div",{staticClass:"date-filters"},[e("input",{attrs:{type:"text",readonly:""},domProps:{value:t.calendar2.display},on:{click:function(a){return a.stopPropagation(),t.openByDialog(a)}}})]),e("transition",{attrs:{name:"fade"}},[t.calendar2.show?e("div",{staticClass:"calendar-dialog"},[e("div",{staticClass:"calendar-dialog-mask",on:{click:t.closeByDialog}}),e("div",{staticClass:"calendar-dialog-body"},[e("calendar",{attrs:{range:t.calendar2.range,zero:t.calendar2.zero,lunar:t.calendar2.lunar,value:t.calendar2.value},on:{select:t.calendar2.select}})],1)]):t._e()])],1),e("div",{staticClass:"myChart-box"},[e("div",{ref:"myChart_jjxSku",staticClass:"myChart",staticStyle:{width:"375px",height:"360px"}})]),e("div",{staticClass:"chart-text"},[e("p",[t._v("客流均值: "+t._s(t.totalSum))]),e("p",[t._v("同期客流均值: "+t._s(t.tqTotalSum))])])])],1)],1)},i=[],s=(e("4160"),e("a15b"),e("b680"),e("ac1f"),e("1276"),e("159b"),e("da3c"),e("0b33")),r=(e("bda7"),e("5e46")),o=(e("6d73"),e("473d")),l=(e("be7f"),e("565f")),c=e("2b0e"),d=e("a4ce"),u=e("ea77"),h=e("3eba"),f=e.n(h);e("ef97"),e("d28f"),e("007d");c["default"].use(s["a"]).use(r["a"]).use(o["a"]).use(l["a"]);var p={name:"CustomerFlow",components:{AppHeader:d["a"],calendar:u["a"]},data:function(){var t=this;return{active:0,salesActive:0,profitActive:0,screenWidth:document.body.clientWidth,offsetTop:90/(750/document.body.clientWidth),calendar:{display:"2020/02/16 ~ 2020/03/16",show:!1,range:!0,zero:!0,value:[[2018,2,16],[2019,2,16]],lunar:!0,select:function(a,e){t.calendar_startDate=a.join("-"),t.calendar_endDate=e.join("-"),t.calendar.show=!1,t.calendar.value=[a,e],t.calendar.display=a.join("/")+" ~ "+e.join("/"),t.$nextTick((function(){t.get_kd_Chart()}))}},calendar2:{display:"2020/02/16 ~ 2020/03/16",show:!1,range:!0,zero:!0,value:[[2018,2,16],[2019,2,16]],lunar:!0,select:function(a,e){t.calendar2_startDate=a.join("-"),t.calendar2_endDate=e.join("-"),t.calendar2.show=!1,t.calendar2.value=[a,e],t.calendar2.display=a.join("/")+" ~ "+e.join("/"),t.$nextTick((function(){t.get_kl_Chart()}))}},calendar_startDate:"",calendar_endDate:"",calendar2_startDate:"",calendar2_endDate:"",getStoreInfo:"",sku_myChart:null,resultData:[],totalSum:0,tqTotalSum:0}},created:function(){this.get_defaultData(),this.get_data()},mounted:function(){},methods:{tabOnClick:function(t,a,e){var n=this;0==t?0==this.salesActive?this.$nextTick((function(){n.drawLine_kd(),n.totalSum=n.kd_num,n.tqTotalSum=n.tqkd_num})):1==this.salesActive&&this.$nextTick((function(){n.drawLine_nlkd(),n.totalSum=n.kd_num,n.tqTotalSum=n.nlkd_num})):1==t&&(0==this.profitActive?this.$nextTick((function(){n.drawLine_kl(),n.totalSum=n.kl_num,n.tqTotalSum=n.tqkl_num})):1==this.profitActive&&this.$nextTick((function(){n.drawLine_nlkl(),n.totalSum=n.kl_num,n.tqTotalSum=n.nlkl_num})))},salesTabClick:function(t,a,e){var n=this;0==t?this.$nextTick((function(){n.drawLine_kd(),n.totalSum=n.kd_num,n.tqTotalSum=n.tqkd_num})):1==t&&this.$nextTick((function(){n.drawLine_nlkd(),n.totalSum=n.kd_num,n.tqTotalSum=n.nlkd_num}))},profitTabClick:function(t,a,e){var n=this;0==t?this.$nextTick((function(){n.drawLine_kl(),n.totalSum=n.kl_num,n.tqTotalSum=n.tqkl_num})):1==t&&this.$nextTick((function(){n.drawLine_nlkl(),n.totalSum=n.kl_num,n.tqTotalSum=n.nlkl_num}))},get_defaultData:function(){this.getStoreInfo=this.$store.getters.getStoreInfo;var t=this.formatDate.pastDate(this.$store.state.defaultDate+1,"-"),a=this.formatDate.pastDate(2,"-");this.calendar_startDate=t,this.calendar_endDate=a,this.calendar.value=[t.split("-"),a.split("-")],this.calendar.display=this.formatDate.pastDate(this.$store.state.defaultDate+1,"-")+" ~ "+this.formatDate.pastDate(2,"-"),this.calendar2_startDate=t,this.calendar2_endDate=a,this.calendar2.value=[t.split("-"),a.split("-")],this.calendar2.display=this.formatDate.pastDate(this.$store.state.defaultDate+1,"-")+" ~ "+this.formatDate.pastDate(2,"-")},get_data:function(){var t=this;this.toast.loading({message:"加载中...",forbidClick:!0,loadingType:"spinner",duration:0}),this.dateArray=this.dateArray2=this.formatDate.dateArray(this.calendar_startDate,this.calendar_endDate);var a={storeId:this.getStoreInfo.gid,startDate:this.calendar_startDate,endDate:this.calendar_endDate};this.serverHost.fetchPost("/getReportData",a).then((function(a){t.toast.clear();var e=a.data.data,n=[],i=[],s=[],r=[],o=[],l=[];e.forEach((function(t){t.guestList?n.push(t.guestList):n.push("0"),t.guestListSame?i.push(t.guestListSame):i.push("0"),t.nguestListSame?s.push(t.nguestListSame):s.push("0"),t.passengerFlow?r.push(t.passengerFlow):r.push("0"),t.passengerFlowSame?o.push(t.passengerFlowSame):o.push("0"),t.npassengerFlowSame?l.push(t.npassengerFlowSame):l.push("0")})),t.resultData=e,t.theDay_kd=n,t.contemporary_tqkd=i,t.contemporary_nlkd=s;var c=0,d=0,u=0;n.forEach((function(t){c+=parseFloat(t)})),i.forEach((function(t){d+=parseFloat(t)})),s.forEach((function(t){u+=parseFloat(t)})),t.kd_num=c.toFixed(2),t.tqkd_num=d.toFixed(2),t.nlkd_num=u.toFixed(2),t.totalSum=t.kd_num,t.tqTotalSum=t.tqkd_num,t.drawLine_kd(),t.theDay_kl=r,t.contemporary_tqkl=o,t.contemporary_nlkl=l;var h=0,f=0,p=0;r.forEach((function(t){h+=parseFloat(t)})),o.forEach((function(t){f+=parseFloat(t)})),l.forEach((function(t){p+=parseFloat(t)})),t.kl_num=h.toFixed(2),t.tqkl_num=f.toFixed(2),t.nlkl_num=p.toFixed(2)})).catch((function(a){t.toast.clear(),console.log(a)}))},get_kd_Chart:function(){var t=this;this.toast.loading({message:"加载中...",forbidClick:!0,loadingType:"spinner",duration:0}),this.dateArray=this.formatDate.dateArray(this.calendar_startDate,this.calendar_endDate);var a={storeId:this.getStoreInfo.gid,startDate:this.calendar_startDate,endDate:this.calendar_endDate};this.serverHost.fetchPost("/getReportData",a).then((function(a){t.toast.clear();var e=a.data.data,n=[],i=[],s=[];e.forEach((function(t){t.guestList?n.push(t.guestList):n.push("0"),t.guestListSame?i.push(t.guestListSame):i.push("0"),t.nguestListSame?s.push(t.nguestListSame):s.push("0")})),t.resultData=e,t.theDay_kd=n,t.contemporary_tqkd=i,t.contemporary_nlkd=s;var r=0,o=0,l=0;n.forEach((function(t){r+=parseFloat(t)})),i.forEach((function(t){o+=parseFloat(t)})),s.forEach((function(t){l+=parseFloat(t)})),t.kd_num=r.toFixed(2),t.tqkd_num=o.toFixed(2),t.nlkd_num=l.toFixed(2),0==t.salesActive?t.$nextTick((function(){t.drawLine_kd(),t.totalSum=t.kd_num,t.tqTotalSum=t.tqkd_num})):t.$nextTick((function(){t.drawLine_nlkd(),t.totalSum=t.kd_num,t.tqTotalSum=t.nlkd_num}))})).catch((function(a){t.toast.clear(),console.log(a)}))},get_kl_Chart:function(){var t=this;this.toast.loading({message:"加载中...",forbidClick:!0,loadingType:"spinner",duration:0}),this.dateArray2=this.formatDate.dateArray(this.calendar2_startDate,this.calendar2_endDate);var a={storeId:this.getStoreInfo.gid,startDate:this.calendar2_startDate,endDate:this.calendar2_endDate};this.serverHost.fetchPost("/getReportData",a).then((function(a){t.toast.clear();var e=a.data.data,n=[],i=[],s=[];e.forEach((function(t){t.passengerFlow?n.push(t.passengerFlow):n.push("0"),t.passengerFlowSame?i.push(t.passengerFlowSame):i.push("0"),t.npassengerFlowSame?s.push(t.npassengerFlowSame):s.push("0")})),t.resultData=e,t.theDay_kl=n,t.contemporary_tqkl=i,t.contemporary_nlkl=s;var r=0,o=0,l=0;n.forEach((function(t){r+=parseFloat(t)})),i.forEach((function(t){o+=parseFloat(t)})),s.forEach((function(t){l+=parseFloat(t)})),t.kl_num=r.toFixed(2),t.tqkl_num=o.toFixed(2),t.nlkl_num=l.toFixed(2),0==t.profitActive?t.$nextTick((function(){t.drawLine_kl(),t.totalSum=t.kl_num,t.tqTotalSum=t.tqkl_num})):t.$nextTick((function(){t.drawLine_nlkl(),t.totalSum=t.kl_num,t.tqTotalSum=t.nlkl_num}))})).catch((function(a){t.toast.clear(),console.log(a)}))},openByDialog:function(){this.calendar.show=!0,this.calendar2.show=!0},closeByDialog:function(){this.calendar.show=!1,this.calendar2.show=!1},drawLine_kd:function(){var t=f.a.init(this.$refs.myChart_sku),a=this.dateArray,e=this.theDay_kd,n=this.contemporary_tqkd;t.setOption({tooltip:{trigger:"axis"},legend:{data:["客单","同期客单"],bottom:0,left:"center"},grid:{top:"5%",left:"3%",right:"12%",bottom:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:a},yAxis:{type:"value"},series:[{name:"客单",type:"line",data:e},{name:"同期客单",type:"line",data:n}]})},drawLine_nlkd:function(){var t=f.a.init(this.$refs.myChart_sku),a=this.dateArray,e=this.theDay_kd,n=this.contemporary_nlkd;t.setOption({tooltip:{trigger:"axis"},legend:{data:["客单","同期客单"],bottom:0,left:"center"},grid:{top:"5%",left:"3%",right:"12%",bottom:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:a},yAxis:{type:"value"},series:[{name:"客单",type:"line",data:e},{name:"同期客单",type:"line",data:n}]})},drawLine_kl:function(){var t=f.a.init(this.$refs.myChart_jjxSku),a=this.dateArray2,e=this.theDay_kl,n=this.contemporary_tqkl;t.setOption({tooltip:{trigger:"axis"},legend:{data:["客单","同期客单"],bottom:0,left:"center"},grid:{top:"5%",left:"3%",right:"12%",bottom:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:a},yAxis:{type:"value"},series:[{name:"客单",type:"line",data:e},{name:"同期客单",type:"line",data:n}]})},drawLine_nlkl:function(){var t=f.a.init(this.$refs.myChart_jjxSku),a=this.dateArray2,e=this.theDay_kl,n=this.contemporary_nlkl;t.setOption({tooltip:{trigger:"axis"},legend:{data:["客流","同期客流"],bottom:0,left:"center"},grid:{top:"5%",left:"3%",right:"12%",bottom:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:a},yAxis:{type:"value"},series:[{name:"客流",type:"line",data:e},{name:"同期客流",type:"line",data:n}]})}}},m=p,_=(e("d411"),e("2877")),k=Object(_["a"])(m,n,i,!1,null,"42c3ff74",null);a["default"]=k.exports},"408a":function(t,a,e){var n=e("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=n(t))throw TypeError("Incorrect invocation");return+t}},b680:function(t,a,e){"use strict";var n=e("23e7"),i=e("a691"),s=e("408a"),r=e("1148"),o=e("d039"),l=1..toFixed,c=Math.floor,d=function(t,a,e){return 0===a?e:a%2===1?d(t,a-1,e*t):d(t*t,a/2,e)},u=function(t){var a=0,e=t;while(e>=4096)a+=12,e/=4096;while(e>=2)a+=1,e/=2;return a},h=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){l.call({})}));n({target:"Number",proto:!0,forced:h},{toFixed:function(t){var a,e,n,o,l=s(this),h=i(t),f=[0,0,0,0,0,0],p="",m="0",_=function(t,a){var e=-1,n=a;while(++e<6)n+=t*f[e],f[e]=n%1e7,n=c(n/1e7)},k=function(t){var a=6,e=0;while(--a>=0)e+=f[a],f[a]=c(e/t),e=e%t*1e7},g=function(){var t=6,a="";while(--t>=0)if(""!==a||0===t||0!==f[t]){var e=String(f[t]);a=""===a?e:a+r.call("0",7-e.length)+e}return a};if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(p="-",l=-l),l>1e-21)if(a=u(l*d(2,69,1))-69,e=a<0?l*d(2,-a,1):l/d(2,a,1),e*=4503599627370496,a=52-a,a>0){_(0,e),n=h;while(n>=7)_(1e7,0),n-=7;_(d(10,n,1),0),n=a-1;while(n>=23)k(1<<23),n-=23;k(1<<n),_(1,1),k(2),m=g()}else _(0,e),_(1<<-a,0),m=g()+r.call("0",h);return h>0?(o=m.length,m=p+(o<=h?"0."+r.call("0",h-o)+m:m.slice(0,o-h)+"."+m.slice(o-h))):m=p+m,m}})},d411:function(t,a,e){"use strict";var n=e("f901"),i=e.n(n);i.a},f901:function(t,a,e){}}]);
//# sourceMappingURL=chunk-a47bf962.2b9ec262.js.map