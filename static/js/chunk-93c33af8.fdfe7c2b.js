(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-93c33af8"],{"2fab":function(t,e,a){},"473d":function(t,e,a){"use strict";var n=a("bad1"),i=a("a8c1"),r=a("d282"),s=Object(r["a"])("calendar"),o=s[0],l=s[1],c=s[2],h=64;function u(t){return c("monthTitle",t.getFullYear(),t.getMonth()+1)}function d(t,e){var a=t.getFullYear(),n=e.getFullYear(),i=t.getMonth(),r=e.getMonth();return a===n?i===r?0:i>r?1:-1:a>n?1:-1}function f(t,e){var a=d(t,e);if(0===a){var n=t.getDate(),i=e.getDate();return n===i?0:n>i?1:-1}return a}function g(t){return t=new Date(t),t.setDate(t.getDate()+1),t}function v(t){var e=t[0].getTime(),a=t[1].getTime();return(a-e)/864e5+1}var p=a("e41f"),m=a("b650"),D=a("d399"),y=a("96b0"),b=Object(r["a"])("calendar-month"),k=b[0],w=k({props:{date:Date,type:String,color:String,minDate:Date,maxDate:Date,showMark:Boolean,showTitle:Boolean,rowHeight:[Number,String],formatter:Function,currentDate:[Date,Array]},data:function(){return{visible:!1}},computed:{title:function(){return u(this.date)},offset:function(){return this.date.getDay()},totalDay:function(){return Object(y["a"])(this.date.getFullYear(),this.date.getMonth()+1)},monthStyle:function(){if(!this.visible){var t=Math.ceil((this.totalDay+this.offset)/7)*this.rowHeight;return{paddingBottom:t+"px"}}},days:function(){for(var t=[],e=this.date.getFullYear(),a=this.date.getMonth(),n=1;n<=this.totalDay;n++){var i=new Date(e,a,n),r=this.getDayType(i),s={date:i,type:r,text:n,bottomInfo:this.getBottomInfo(r)};this.formatter&&(s=this.formatter(s)),t.push(s)}return t}},mounted:function(){this.height=this.$el.getBoundingClientRect().height},methods:{scrollIntoView:function(){this.$refs.days.scrollIntoView()},getDayType:function(t){var e=this.type,a=this.minDate,n=this.maxDate,i=this.currentDate;if(f(t,a)<0||f(t,n)>0)return"disabled";if("single"===e)return 0===f(t,i)?"selected":"";if("range"===e){var r=this.currentDate,s=r[0],o=r[1];if(!s)return;var l=f(t,s);if(0===l)return"start";if(!o)return;var c=f(t,o);if(0===c)return"end";if(l>0&&c<0)return"middle"}},getBottomInfo:function(t){return"start"===t?c("start"):"end"===t?c("end"):void 0},getDayStyle:function(t,e){var a={};return 0===e&&(a.marginLeft=100*this.offset/7+"%"),this.rowHeight!==h&&(a.height=this.rowHeight+"px"),this.color&&("start"===t||"end"===t?a.background=this.color:"middle"===t&&(a.color=this.color)),a},genTitle:function(){var t=this.$createElement;if(this.showTitle)return t("div",{class:l("month-title")},[this.title])},genMark:function(){var t=this.$createElement;if(this.showMark)return t("div",{class:l("month-mark")},[this.date.getMonth()+1])},genDays:function(){var t=this.$createElement;return this.visible?t("div",{ref:"days",attrs:{role:"grid"},class:l("days")},[this.genMark(),this.days.map(this.genDay)]):t("div",{ref:"days"})},genDay:function(t,e){var a=this,n=this.$createElement,i=t.type,r=t.topInfo,s=t.bottomInfo,o=this.getDayStyle(i,e),c="disabled"===i,h=function(){c||a.$emit("click",t)},u=r&&n("div",{class:l("top-info")},[r]),d=s&&n("div",{class:l("bottom-info")},[s]);return"selected"===i?n("div",{attrs:{role:"gridcell",tabindex:c?null:-1},style:o,class:[l("day"),t.className],on:{click:h}},[n("div",{class:l("selected-day"),style:{background:this.color}},[u,t.text,d])]):n("div",{attrs:{role:"gridcell",tabindex:c?null:-1},style:o,class:[l("day",i),t.className],on:{click:h}},[u,t.text,d])}},render:function(){var t=arguments[0];return t("div",{class:l("month"),style:this.monthStyle},[this.genTitle(),this.genDays()])}}),_=Object(r["a"])("calendar-header"),C=_[0],S=C({props:{title:String,monthTitle:String},methods:{genTitle:function(){var t=this.$createElement,e=this.slots("title")||this.title||c("title");return t("div",{class:l("header-title")},[e])},genMonth:function(){var t=this.$createElement;return t("div",{class:l("month-title")},[this.monthTitle])},genWeekDays:function(){var t=this.$createElement,e=c("weekdays");return t("div",{class:l("weekdays")},[e.map((function(e){return t("span",{class:l("weekday")},[e])}))])}},render:function(){var t=arguments[0];return t("div",{class:l("header")},[this.genTitle(),this.genMonth(),this.genWeekDays()])}});e["a"]=o({props:{title:String,color:String,value:Boolean,formatter:Function,confirmText:String,rangePrompt:String,defaultDate:[Date,Array],getContainer:[String,Function],closeOnPopstate:Boolean,confirmDisabledText:String,type:{type:String,default:"single"},minDate:{type:Date,validator:n["a"],default:function(){return new Date}},maxDate:{type:Date,validator:n["a"],default:function(){var t=new Date;return new Date(t.getFullYear(),t.getMonth()+6,t.getDate())}},position:{type:String,default:"bottom"},rowHeight:{type:[Number,String],default:h},round:{type:Boolean,default:!0},poppable:{type:Boolean,default:!0},showMark:{type:Boolean,default:!0},showConfirm:{type:Boolean,default:!0},safeAreaInsetBottom:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0},maxRange:{type:[Number,String],default:null}},data:function(){return{monthTitle:"",currentDate:this.getInitialDate()}},computed:{range:function(){return"range"===this.type},months:function(){var t=[],e=new Date(this.minDate);e.setDate(1);do{t.push(new Date(e)),e.setMonth(e.getMonth()+1)}while(1!==d(e,this.maxDate));return t},buttonDisabled:function(){return this.range?!this.currentDate[0]||!this.currentDate[1]:!this.currentDate}},watch:{type:"reset",value:function(t){t&&(this.initRect(),this.scrollIntoView())},defaultDate:function(t){this.currentDate=t,this.scrollIntoView()}},mounted:function(){!this.value&&this.poppable||this.initRect()},methods:{reset:function(){this.currentDate=this.getInitialDate(),this.scrollIntoView()},initRect:function(){var t=this;this.$nextTick((function(){t.bodyHeight=Math.floor(t.$refs.body.getBoundingClientRect().height),t.onScroll()}))},scrollIntoView:function(){var t=this;this.$nextTick((function(){var e=t.currentDate,a=t.range?e[0]:e,n=t.value||!t.poppable;a&&n&&t.months.some((function(e,n){return 0===d(e,a)&&(t.$refs.months[n].scrollIntoView(),!0)}))}))},getInitialDate:function(){var t=this.type,e=this.defaultDate,a=this.minDate;if("range"===t){var n=e||[],i=n[0],r=n[1];return[i||a,r||g(a)]}return e||a},onScroll:function(){var t=this.$refs,e=t.body,a=t.months,n=Object(i["c"])(e),r=n+this.bodyHeight,s=a.map((function(t){return t.height})),o=s.reduce((function(t,e){return t+e}),0);if(!(n<0||r>o&&n>0)){for(var l,c=0,h=0;h<a.length;h++){var u=c<=r&&c+s[h]>=n;u&&!l&&(l=a[h]),a[h].visible=u,c+=s[h]}l&&(this.monthTitle=l.title)}},onClickDay:function(t){var e=t.date;if(this.range){var a=this.currentDate,n=a[0],i=a[1];if(n&&!i){var r=f(e,n);1===r?this.select([n,e],!0):-1===r&&this.select([e,null])}else this.select([e,null])}else this.select(e,!0)},togglePopup:function(t){this.$emit("input",t)},select:function(t,e){if(this.currentDate=t,this.$emit("select",this.currentDate),e&&this.range){var a=this.checkRange();if(!a)return}e&&!this.showConfirm&&this.onConfirm()},checkRange:function(){var t=this.maxRange,e=this.currentDate,a=this.rangePrompt;return!(t&&v(e)>t)||(Object(D["a"])(a||c("rangePrompt",t)),!1)},onConfirm:function(){this.range&&!this.checkRange()||this.$emit("confirm",this.currentDate)},genMonth:function(t,e){var a=this.$createElement;return a(w,{ref:"months",refInFor:!0,attrs:{date:t,type:this.type,color:this.color,minDate:this.minDate,maxDate:this.maxDate,showMark:this.showMark,formatter:this.formatter,rowHeight:this.rowHeight,showTitle:0!==e,currentDate:this.currentDate},on:{click:this.onClickDay}})},genFooterContent:function(){var t=this.$createElement,e=this.slots("footer");if(e)return e;if(this.showConfirm){var a=this.buttonDisabled?this.confirmDisabledText:this.confirmText;return t(m["a"],{attrs:{round:!0,block:!0,type:"danger",color:this.color,disabled:this.buttonDisabled,nativeType:"text"},class:l("confirm"),on:{click:this.onConfirm}},[a||c("confirm")])}},genFooter:function(){var t=this.$createElement;return t("div",{class:l("footer",{"safe-area-inset-bottom":this.safeAreaInsetBottom})},[this.genFooterContent()])},genCalendar:function(){var t=this,e=this.$createElement;return e("div",{class:l()},[e(S,{attrs:{title:this.title,monthTitle:this.monthTitle},scopedSlots:{title:function(){return t.slots("title")}}}),e("div",{ref:"body",class:l("body"),on:{scroll:this.onScroll}},[this.months.map(this.genMonth)]),this.genFooter()])}},render:function(){var t=this,e=arguments[0];if(this.poppable){var a,n=function(e){return function(){return t.$emit(e)}};return e(p["a"],{attrs:(a={round:!0,closeable:!0,value:this.value},a["round"]=this.round,a["position"]=this.position,a["getContainer"]=this.getContainer,a["closeOnPopstate"]=this.closeOnPopstate,a["closeOnClickOverlay"]=this.closeOnClickOverlay,a),class:l("popup"),on:{input:this.togglePopup,open:n("open"),opened:n("opened"),close:n("close"),closed:n("closed")}},[this.genCalendar()])}return this.genCalendar()}})},"4fbc":function(t,e,a){},"6d73":function(t,e,a){"use strict";a("68ef"),a("a71a"),a("9d70"),a("3743"),a("4d75"),a("e3b3"),a("bc1b"),a("b258"),a("819b")},"819b":function(t,e,a){},"87ae":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"aoodsShelvesEfficacy"},[a("AppHeader",[a("p",{attrs:{slot:"center"},slot:"center"},[t._v("货架效能")])]),a("div",{staticClass:"filters"},[a("div",{staticClass:"date-filters"},[a("input",{attrs:{type:"text",readonly:""},domProps:{value:t.calendar.display},on:{click:function(e){return e.stopPropagation(),t.openByDialog(e)}}})]),a("transition",{attrs:{name:"fade"}},[t.calendar.show?a("div",{staticClass:"calendar-dialog"},[a("div",{staticClass:"calendar-dialog-mask",on:{click:t.closeByDialog}}),a("div",{staticClass:"calendar-dialog-body"},[a("calendar",{attrs:{range:t.calendar.range,zero:t.calendar.zero,lunar:t.calendar.lunar,value:t.calendar.value},on:{select:t.calendar.select}})],1)]):t._e()])],1),a("div",{staticClass:"contrast"},[a("van-tabs",{on:{click:t.salesTabClick},model:{value:t.salesActive,callback:function(e){t.salesActive=e},expression:"salesActive"}},[a("van-tab",{attrs:{title:"销售额"}}),a("van-tab",{attrs:{title:"毛利额"}})],1)],1),t._m(0),t.hasData?a("div",{staticClass:"detailed-table"},[a("div",{staticClass:"table-content"},[a("table",[t._m(1),a("tbody",t._l(t.resultData,(function(e,n){return a("tr",{key:n},[a("td",[t._v(t._s(e.deptNo))]),a("td",[t._v(t._s(e.rcode))]),a("td",[a("div",[a("van-progress",{attrs:{percentage:50,"show-pivot":!1,"stroke-width":"8"}}),a("p",[t._v(t._s(e.salesVolume))])],1)])])})),0)])])]):t._e()],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tips"},[a("p",[t._v(" 小贴士：月销售额低于2000， "),a("span",{staticStyle:{color:"red"}},[t._v("红色")]),t._v("显示；月销售额2000-5000， "),a("span",{staticStyle:{color:"#ff0"}},[t._v("黄色")]),t._v(" 显示；月销售额高于5000， "),a("span",{staticStyle:{color:"green"}},[t._v("绿色")]),t._v(" 显示。 ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("部门")]),a("th",[t._v("货架编号")]),a("th",[t._v("货架效能")])])])}],r=(a("a15b"),a("ac1f"),a("1276"),a("da3c"),a("0b33")),s=(a("bda7"),a("5e46")),o=(a("6d73"),a("473d")),l=(a("68ef"),a("4fbc"),a("d282")),c=a("a142"),h=a("ea8e"),u=Object(l["a"])("progress"),d=u[0],f=u[1],g=d({props:{color:String,inactive:Boolean,pivotText:String,textColor:String,pivotColor:String,trackColor:String,strokeWidth:[Number,String],percentage:{type:[Number,String],required:!0,validator:function(t){return t>=0&&t<=100}},showPivot:{type:Boolean,default:!0}},data:function(){return{pivotWidth:0,progressWidth:0}},mounted:function(){this.setWidth()},watch:{showPivot:"setWidth",pivotText:"setWidth"},methods:{setWidth:function(){var t=this;this.$nextTick((function(){t.progressWidth=t.$el.offsetWidth,t.pivotWidth=t.$refs.pivot?t.$refs.pivot.offsetWidth:0}))}},render:function(){var t=arguments[0],e=this.pivotText,a=this.percentage,n=Object(c["b"])(e)?e:a+"%",i=this.showPivot&&n,r=this.inactive?"#cacaca":this.color,s={color:this.textColor,left:(this.progressWidth-this.pivotWidth)*a/100+"px",background:this.pivotColor||r},o={background:r,width:this.progressWidth*a/100+"px"},l={background:this.trackColor,height:Object(h["a"])(this.strokeWidth)};return t("div",{class:f(),style:l},[t("span",{class:f("portion"),style:o},[i&&t("span",{ref:"pivot",style:s,class:f("pivot")},[n])])])}}),v=(a("be7f"),a("565f")),p=a("2b0e"),m=a("a4ce"),D=a("ea77");p["default"].use(r["a"]).use(s["a"]).use(o["a"]).use(g).use(v["a"]);var y={name:"AoodsShelvesEfficacy",components:{AppHeader:m["a"],calendar:D["a"]},data:function(){var t=this;return{active:0,salesActive:0,screenWidth:document.body.clientWidth,offsetTop:90/(750/document.body.clientWidth),calendar:{display:"2020/02/16 ~ 2020/03/16",show:!1,range:!0,zero:!0,value:[[2018,2,16],[2019,2,16]],lunar:!0,select:function(e,a){console.log(e,a),t.calendar_startDate=e.join("-"),t.calendar_endDate=a.join("-"),t.calendar.show=!1,t.calendar.value=[e,a],t.calendar.display=e.join("/")+" ~ "+a.join("/"),t.$nextTick((function(){t.get_data()}))}},calendar_startDate:"",calendar_endDate:"",getStoreInfo:"",sku_myChart:null,resultData:[],hasData:!1}},created:function(){this.get_defaultData(),this.get_data()},mounted:function(){},methods:{salesTabClick:function(t,e,a){(0==t||1==t)&&this.$nextTick((function(){}))},openByDialog:function(){this.calendar.show=!0},closeByDialog:function(){this.calendar.show=!1},get_defaultData:function(){this.getStoreInfo=this.$store.getters.getStoreInfo,console.log(this.$store.state.defaultDate);var t=this.formatDate.pastDate(this.$store.state.defaultDate+1,"-"),e=this.formatDate.pastDate(2,"-");this.calendar_startDate=t,this.calendar_endDate=e,this.calendar.value=[t.split("-"),e.split("-")],this.calendar.display=this.formatDate.pastDate(this.$store.state.defaultDate+1,"-")+" ~ "+this.formatDate.pastDate(2,"-")},get_data:function(){var t=this;this.toast.loading({message:"加载中...",forbidClick:!0,loadingType:"spinner",duration:0}),this.getStoreInfo=this.$store.getters.getStoreInfo;var e={storeId:this.getStoreInfo.gid,startDate:this.calendar_startDate,endDate:this.calendar_endDate};this.serverHost.fetchPost("/shelf/shelfEfficiency",e).then((function(e){t.toast.clear(),console.log(e);var a=e.data.data;0==a.length?t.hasData=!1:(t.hasData=!0,t.resultData=a)})).catch((function(e){t.toast.clear(),console.log(e)}))}}},b=y,k=(a("ecd8"),a("2877")),w=Object(k["a"])(b,n,i,!1,null,"79893182",null);e["default"]=w.exports},ecd8:function(t,e,a){"use strict";var n=a("2fab"),i=a.n(n);i.a}}]);
//# sourceMappingURL=chunk-93c33af8.fdfe7c2b.js.map