{"version":3,"sources":["webpack:///./src/views/index/stock.vue?18c9","webpack:///./src/views/index/stock.vue?5370","webpack:///src/views/index/stock.vue","webpack:///./src/views/index/stock.vue?4f08","webpack:///./src/views/index/stock.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","closeByDialog","attrs","slot","_v","salesTabClick","model","value","callback","$$v","salesActive","expression","domProps","calendar","display","$event","stopPropagation","openByDialog","range","zero","lunar","select","_e","ref","staticStyle","staticRenderFns","name","components","AppHeader","data","active","screenWidth","document","body","clientWidth","offsetTop","show","calendar_startDate","calendar_endDate","getStoreInfo","sku_myChart","resultData","created","$nextTick","mounted","methods","get_defaultData","$store","getters","time1","time2","split","get_data","toast","loading","message","forbidClick","loadingType","duration","dateArray","formatDate","storeId","gid","startDate","endDate","serverHost","drawLine_chart1","setOption","tooltip","trigger","legend","bottom","left","grid","top","right","containLabel","xAxis","type","boundaryGap","yAxis","series","drawLine_chart2","component"],"mappings":"kHAAA,yBAAujB,EAAG,G,kECA1jB,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,kBAAkBC,GAAG,CAAC,MAAQP,EAAIQ,gBAAgB,CAACJ,EAAG,YAAY,CAACA,EAAG,IAAI,CAACK,MAAM,CAAC,KAAO,UAAUC,KAAK,UAAU,CAACV,EAAIW,GAAG,YAAYP,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,WAAW,CAACG,GAAG,CAAC,MAAQP,EAAIY,eAAeC,MAAM,CAACC,MAAOd,EAAe,YAAEe,SAAS,SAAUC,GAAMhB,EAAIiB,YAAYD,GAAKE,WAAW,gBAAgB,CAACd,EAAG,UAAU,CAACK,MAAM,CAAC,MAAQ,UAAUL,EAAG,UAAU,CAACK,MAAM,CAAC,MAAQ,WAAW,IAAI,GAAGL,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,QAAQ,CAACK,MAAM,CAAC,KAAO,OAAO,SAAW,IAAIU,SAAS,CAAC,MAAQnB,EAAIoB,SAASC,SAASd,GAAG,CAAC,MAAQ,SAASe,GAAiC,OAAzBA,EAAOC,kBAAyBvB,EAAIwB,aAAaF,SAAclB,EAAG,aAAa,CAACK,MAAM,CAAC,KAAO,SAAS,CAAET,EAAIoB,SAAa,KAAEhB,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,MAAM,CAACE,YAAY,uBAAuBC,GAAG,CAAC,MAAQP,EAAIQ,iBAAiBJ,EAAG,MAAM,CAACE,YAAY,wBAAwB,CAACF,EAAG,WAAW,CAACK,MAAM,CAAC,MAAQT,EAAIoB,SAASK,MAAM,KAAOzB,EAAIoB,SAASM,KAAK,MAAQ1B,EAAIoB,SAASO,MAAM,MAAQ3B,EAAIoB,SAASN,OAAOP,GAAG,CAAC,OAASP,EAAIoB,SAASQ,WAAW,KAAK5B,EAAI6B,QAAQ,GAAGzB,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,MAAM,CAAC0B,IAAI,cAAcxB,YAAY,UAAUyB,YAAY,CAAC,MAAQ,QAAQ,OAAS,cAAc,IAC/yCC,EAAkB,G,yOC0CtB,yBACA,IADA,QAEA,IAFA,QAGA,IAHA,QAaA,OACEC,KAAM,QACNC,WAAY,CACVC,UAAJ,OACIf,SAAJ,QAGEgB,KAPF,WAOA,WACI,MAAO,CACLC,OAAQ,EACRpB,YAAa,EACbqB,YAAaC,SAASC,KAAKC,YAC3BC,UAAW,IAAM,IAAMH,SAASC,KAAKC,aAErCrB,SAAU,CACRC,QAAS,0BACTsB,MAAM,EACNlB,OAAO,EACPC,MAAM,EACNZ,MAAO,CACf,YACA,aAEQa,OAAO,EACPC,OAAQ,SAAhB,KAEU,EAAV,+BACU,EAAV,6BACU,EAAV,iBACU,EAAV,qBACU,EAAV,+CACU,EAAV,sBACY,EAAZ,gBAIMgB,mBAAoB,GACpBC,iBAAkB,GAClBC,aAAc,GACdC,YAAa,KACbC,WAAY,KAGhBC,QA3CF,WA2CA,WACIhD,KAAKiD,WAAU,WACb,EAAN,kBACM,EAAN,eAGEC,QAjDF,aAkDEC,QAAS,CACPxC,cADJ,SACA,kBACkB,GAARqB,EACFhC,KAAKiD,WAAU,WACb,EAAV,qBAEA,MACQjD,KAAKiD,WAAU,WACb,EAAV,sBAIIG,gBAZJ,WAaMpD,KAAK6C,aAAe7C,KAAKqD,OAAOC,QAAQT,aAExC,IAAN,2BACA,gCACA,KAEA,kCACM7C,KAAK2C,mBAAqBY,EAC1BvD,KAAK4C,iBAAmBY,EACxBxD,KAAKmB,SAASN,MAAQ,CAAC0C,EAAME,MAAM,KAAMD,EAAMC,MAAM,MAErDzD,KAAKmB,SAASC,QACpB,8DACA,MACA,iCAGIsC,SA9BJ,WA8BA,WACM1D,KAAK2D,MAAMC,QAAQ,CACjBC,QAAS,SACTC,aAAa,EACbC,YAAa,UACbC,SAAU,IAEZhE,KAAKiE,UAAYjE,KAAKkE,WAAWD,UACvC,wBACA,uBAEM,IAAN,GACQE,QAASnE,KAAK6C,aAAauB,IAC3BC,UAAWrE,KAAK2C,mBAChB2B,QAAStE,KAAK4C,kBAEhB5C,KAAKuE,WACX,8BACA,kBACQ,EAAR,cAEQ,IAAR,cACA,KACA,KACA,KACQ,EAAR,qBACA,kBACY,EAAZ,wBAEY,EAAZ,UAEA,gBACY,EAAZ,sBAEY,EAAZ,UAEA,iBACY,EAAZ,uBAEY,EAAZ,aAGQ,EAAR,aACQ,EAAR,YACQ,EAAR,oBACQ,EAAR,oBACA,iBACU,EAAV,sBACY,EAAZ,qBAGU,EAAV,sBACY,EAAZ,qBAGQ,EAAR,qBAEA,mBACQ,EAAR,cACQ,QAAR,WAGIhD,aA5FJ,WA6FMvB,KAAKmB,SAASuB,MAAO,GAEvBnC,cA/FJ,WAgGMP,KAAKmB,SAASuB,MAAO,GAGvB8B,gBAnGJ,WAqGM,IAAN,mCACA,iBACA,iBACA,yBAEM1B,EAAY2B,UAAU,CAEpBC,QAAS,CACPC,QAAS,QAGXC,OAAQ,CACNzC,KAAM,CAAC,OAAQ,UACf0C,OAAQ,EACRC,KAAM,UAGRC,KAAM,CACJC,IAAK,KACLF,KAAM,KACNG,MAAO,MACPJ,OAAQ,MACRK,cAAc,GAGhBC,MAAO,CACLC,KAAM,WACNC,aAAa,EACblD,KAAM8B,GAGRqB,MAAO,CACLF,KAAM,SAGRG,OAAQ,CAChB,CACU,KAAV,OACU,KAAV,OACU,KAAV,GAEA,CACU,KAAV,SACU,KAAV,OACU,KAAV,OAKIC,gBAtJJ,WAwJM,IAAN,mCACA,iBACA,iBACA,yBAEM1C,EAAY2B,UAAU,CAEpBC,QAAS,CACPC,QAAS,QAGXC,OAAQ,CACNzC,KAAM,CAAC,OAAQ,UACf0C,OAAQ,EACRC,KAAM,UAGRC,KAAM,CACJC,IAAK,KACLF,KAAM,KACNG,MAAO,MACPJ,OAAQ,MACRK,cAAc,GAGhBC,MAAO,CACLC,KAAM,WACNC,aAAa,EACblD,KAAM8B,GAGRqB,MAAO,CACLF,KAAM,SAGRG,OAAQ,CAChB,CACU,KAAV,OACU,KAAV,OACU,KAAV,GAEA,CACU,KAAV,SACU,KAAV,OACU,KAAV,SC9S8V,I,wBCQ1VE,EAAY,eACd,EACA3F,EACAiC,GACA,EACA,KACA,WACA,MAIa,aAAA0D,E","file":"static/js/chunk-29a7c198.864f879c.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./stock.vue?vue&type=style&index=0&id=7b2a7832&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./stock.vue?vue&type=style&index=0&id=7b2a7832&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"stock chartPage\",on:{\"click\":_vm.closeByDialog}},[_c('AppHeader',[_c('p',{attrs:{\"slot\":\"center\"},slot:\"center\"},[_vm._v(\"库存走势\")])]),_c('div',{staticClass:\"contrast\"},[_c('van-tabs',{on:{\"click\":_vm.salesTabClick},model:{value:(_vm.salesActive),callback:function ($$v) {_vm.salesActive=$$v},expression:\"salesActive\"}},[_c('van-tab',{attrs:{\"title\":\"公历同期\"}}),_c('van-tab',{attrs:{\"title\":\"农历同期\"}})],1)],1),_c('div',{staticClass:\"filters\"},[_c('div',{staticClass:\"date-filters\"},[_c('input',{attrs:{\"type\":\"text\",\"readonly\":\"\"},domProps:{\"value\":_vm.calendar.display},on:{\"click\":function($event){$event.stopPropagation();return _vm.openByDialog($event)}}})]),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.calendar.show)?_c('div',{staticClass:\"calendar-dialog\"},[_c('div',{staticClass:\"calendar-dialog-mask\",on:{\"click\":_vm.closeByDialog}}),_c('div',{staticClass:\"calendar-dialog-body\"},[_c('calendar',{attrs:{\"range\":_vm.calendar.range,\"zero\":_vm.calendar.zero,\"lunar\":_vm.calendar.lunar,\"value\":_vm.calendar.value},on:{\"select\":_vm.calendar.select}})],1)]):_vm._e()])],1),_c('div',{staticClass:\"myChart-box\"},[_c('div',{ref:\"myChart_sku\",staticClass:\"myChart\",staticStyle:{\"width\":\"375px\",\"height\":\"360px\"}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"stock chartPage\" @click=\"closeByDialog\">\n    <AppHeader>\n      <p slot=\"center\">库存走势</p>\n    </AppHeader>\n\n    <div class=\"contrast\">\n      <van-tabs v-model=\"salesActive\" @click=\"salesTabClick\">\n        <van-tab title=\"公历同期\"></van-tab>\n        <van-tab title=\"农历同期\"></van-tab>\n      </van-tabs>\n    </div>\n\n    <div class=\"filters\">\n      <div class=\"date-filters\">\n        <input type=\"text\" @click.stop=\"openByDialog\" :value=\"calendar.display\" readonly />\n      </div>\n      <transition name=\"fade\">\n        <div class=\"calendar-dialog\" v-if=\"calendar.show\">\n          <div class=\"calendar-dialog-mask\" @click=\"closeByDialog\"></div>\n          <div class=\"calendar-dialog-body\">\n            <calendar\n              :range=\"calendar.range\"\n              :zero=\"calendar.zero\"\n              :lunar=\"calendar.lunar\"\n              :value=\"calendar.value\"\n              @select=\"calendar.select\"\n            ></calendar>\n          </div>\n        </div>\n      </transition>\n    </div>\n\n    <div class=\"myChart-box\">\n      <div class=\"myChart\" ref=\"myChart_sku\" style=\"width: 375px;height: 360px\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Vue from \"vue\";\nimport { Tab, Tabs, Calendar, Field } from \"vant\";\n\nVue.use(Tab)\n  .use(Tabs)\n  .use(Calendar)\n  .use(Field);\n\nimport AppHeader from \"@/components/AppHeader.vue\";\nimport calendar from \"@/components/calendar/calendar.vue\";\n\nimport echarts from \"echarts/lib/echarts\"; // 引入基本模板\nimport line from \"echarts/lib/chart/line\"; // 引入线状图组件\nimport legend from \"echarts/lib/component/legend\"; // 引入legend组件\nimport tooltip from \"echarts/lib/component/tooltip\"; // 引入tooltip组件\n\nexport default {\n  name: \"Stock\",\n  components: {\n    AppHeader,\n    calendar\n  },\n\n  data() {\n    return {\n      active: 0,\n      salesActive: 0,\n      screenWidth: document.body.clientWidth, // 屏幕尺寸\n      offsetTop: 90 / (750 / document.body.clientWidth),\n\n      calendar: {\n        display: \"2020/02/16 ~ 2020/03/16\", //输入框站位日期\n        show: false, //是否显示\n        range: true,\n        zero: true,\n        value: [\n          [2018, 2, 16],\n          [2019, 2, 16]\n        ], //默认选中日期\n        lunar: true, //显示农历\n        select: (begin, end) => {\n          // console.log(begin, end);\n          this.calendar_startDate = begin.join(\"-\");\n          this.calendar_endDate = end.join(\"-\");\n          this.calendar.show = false;\n          this.calendar.value = [begin, end];\n          this.calendar.display = begin.join(\"/\") + \" ~ \" + end.join(\"/\");\n          this.$nextTick(() => {\n            this.get_data();\n          });\n        }\n      },\n      calendar_startDate: \"\",\n      calendar_endDate: \"\",\n      getStoreInfo: \"\",\n      sku_myChart: null,\n      resultData: []\n    };\n  },\n  created() {\n    this.$nextTick(() => {\n      this.get_defaultData();\n      this.get_data();\n    });\n  },\n  mounted() {},\n  methods: {\n    salesTabClick(name, title, index) {\n      if (name == 0) {\n        this.$nextTick(() => {\n          this.drawLine_chart1();\n        });\n      } else if (name == 1) {\n        this.$nextTick(() => {\n          this.drawLine_chart2();\n        });\n      }\n    },\n    get_defaultData() {\n      this.getStoreInfo = this.$store.getters.getStoreInfo; //获取当前选择的门店信息\n      // console.log(this.$store.state.defaultDate);\n      const time1 = this.formatDate.pastDate(\n        this.$store.state.defaultDate + 1,\n        \"-\"\n      );\n      const time2 = this.formatDate.pastDate(2, \"-\");\n      this.calendar_startDate = time1; //日历默认开始时间\n      this.calendar_endDate = time2; //日历默认结束时间\n      this.calendar.value = [time1.split(\"-\"), time2.split(\"-\")]; //日历默认选中日期\n      //日历-输入框站位日期\n      this.calendar.display =\n        this.formatDate.pastDate(this.$store.state.defaultDate + 1, \"-\") +\n        \" ~ \" +\n        this.formatDate.pastDate(2, \"-\");\n    },\n    // 获取数据\n    get_data() {\n      this.toast.loading({\n        message: \"加载中...\",\n        forbidClick: true,\n        loadingType: \"spinner\",\n        duration: 0\n      });\n      this.dateArray = this.formatDate.dateArray(\n        this.calendar_startDate,\n        this.calendar_endDate\n      );\n      let params = {\n        storeId: this.getStoreInfo.gid,\n        startDate: this.calendar_startDate,\n        endDate: this.calendar_endDate\n      };\n      this.serverHost\n        .fetchPost(\"/getReportData\", params)\n        .then(res => {\n          this.toast.clear();\n          // console.log(res);\n          const resultData = res.data.data;\n          const theDay_kc = [];\n          const contemporary_tqkc = [];\n          const contemporary_nlkc = [];\n          resultData.forEach(item => {\n            if (item.inventoryAmount) {\n              theDay_kc.push(item.inventoryAmount);\n            } else {\n              theDay_kc.push(\"0\");\n            }\n            if (item.invAmountSame) {\n              contemporary_tqkc.push(item.invAmountSame);\n            } else {\n              contemporary_tqkc.push(\"0\");\n            }\n            if (item.ninvAmountSame) {\n              contemporary_nlkc.push(item.ninvAmountSame);\n            } else {\n              contemporary_nlkc.push(\"0\");\n            }\n          });\n          this.resultData = resultData;\n          this.theDay_kc = theDay_kc;\n          this.contemporary_tqkc = contemporary_tqkc;\n          this.contemporary_nlkc = contemporary_nlkc;\n          if (this.salesActive == 0) {\n            this.$nextTick(() => {\n              this.drawLine_chart1();\n            });\n          } else {\n            this.$nextTick(() => {\n              this.drawLine_chart2();\n            });\n          }\n          this.drawLine_chart1();\n        })\n        .catch(res => {\n          this.toast.clear();\n          console.log(res);\n        });\n    },\n    openByDialog() {\n      this.calendar.show = true;\n    },\n    closeByDialog() {\n      this.calendar.show = false;\n    },\n    //画图\n    drawLine_chart1() {\n      // 基于准备好的dom，初始化echarts实例\n      let sku_myChart = echarts.init(this.$refs.myChart_sku);\n      let dateArray = this.dateArray;\n      let theDay = this.theDay_kc;\n      let contemporary = this.contemporary_tqkc;\n      // 绘制图表\n      sku_myChart.setOption({\n        //鼠标移入图标提示层\n        tooltip: {\n          trigger: \"axis\"\n        },\n        //图例组件相关的行为，必须引入图例组件后才能使用。\n        legend: {\n          data: [\"库存金额\", \"同期库存金额\"],\n          bottom: 0,\n          left: \"center\"\n        },\n        //图标位置\n        grid: {\n          top: \"5%\",\n          left: \"3%\",\n          right: \"12%\",\n          bottom: \"10%\",\n          containLabel: true\n        },\n        //图标 x 轴\n        xAxis: {\n          type: \"category\",\n          boundaryGap: false,\n          data: dateArray\n        },\n        //图标 y 轴\n        yAxis: {\n          type: \"value\"\n        },\n        //数据\n        series: [\n          {\n            name: \"库存金额\",\n            type: \"line\",\n            data: theDay\n          },\n          {\n            name: \"同期库存金额\",\n            type: \"line\",\n            data: contemporary\n          }\n        ]\n      });\n    },\n    drawLine_chart2() {\n      // 基于准备好的dom，初始化echarts实例\n      let sku_myChart = echarts.init(this.$refs.myChart_sku);\n      let dateArray = this.dateArray;\n      let theDay = this.theDay_kc;\n      let contemporary = this.contemporary_nlkc;\n      // 绘制图表\n      sku_myChart.setOption({\n        //鼠标移入图标提示层\n        tooltip: {\n          trigger: \"axis\"\n        },\n        //图例组件相关的行为，必须引入图例组件后才能使用。\n        legend: {\n          data: [\"库存金额\", \"同期库存金额\"],\n          bottom: 0,\n          left: \"center\"\n        },\n        //图标位置\n        grid: {\n          top: \"5%\",\n          left: \"3%\",\n          right: \"12%\",\n          bottom: \"10%\",\n          containLabel: true\n        },\n        //图标 x 轴\n        xAxis: {\n          type: \"category\",\n          boundaryGap: false,\n          data: dateArray\n        },\n        //图标 y 轴\n        yAxis: {\n          type: \"value\"\n        },\n        //数据\n        series: [\n          {\n            name: \"库存金额\",\n            type: \"line\",\n            data: theDay\n          },\n          {\n            name: \"同期库存金额\",\n            type: \"line\",\n            data: contemporary\n          }\n        ]\n      });\n    }\n  }\n};\n</script>\n\n<style scoped lang='scss'>\n.chartPage {\n  min-height: 100vh;\n}\n.contrast .van-tabs {\n  width: 240px;\n}\n.myChart-box {\n  padding: 15px 0;\n}\n.chart-text {\n  padding: 15px;\n  p {\n    font-size: 14px;\n    color: #666;\n    line-height: 1.6;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./stock.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./stock.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./stock.vue?vue&type=template&id=7b2a7832&scoped=true&\"\nimport script from \"./stock.vue?vue&type=script&lang=js&\"\nexport * from \"./stock.vue?vue&type=script&lang=js&\"\nimport style0 from \"./stock.vue?vue&type=style&index=0&id=7b2a7832&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7b2a7832\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}