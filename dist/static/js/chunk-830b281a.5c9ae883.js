(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-830b281a"],{"05f6":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"salesTrends chartPage",on:{click:t.closeByDialog}},[e("AppHeader",[e("p",{attrs:{slot:"center"},slot:"center"},[t._v("销售走势")])]),e("van-tabs",{attrs:{animated:"",sticky:"","offset-top":t.offsetTop},on:{click:t.tabOnClick},model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},[e("van-tab",{attrs:{title:"销售额"}},[e("div",{staticClass:"contrast"},[e("van-tabs",{on:{click:t.salesTabClick},model:{value:t.salesActive,callback:function(a){t.salesActive=a},expression:"salesActive"}},[e("van-tab",{attrs:{title:"公历同期"}}),e("van-tab",{attrs:{title:"农历同期"}})],1)],1),e("div",{staticClass:"filters"},[e("div",{staticClass:"date-filters"},[e("input",{attrs:{type:"text",readonly:""},domProps:{value:t.calendar.display},on:{click:function(a){return a.stopPropagation(),t.openByDialog(a)}}})]),e("transition",{attrs:{name:"fade"}},[t.calendar.show?e("div",{staticClass:"calendar-dialog"},[e("div",{staticClass:"calendar-dialog-mask",on:{click:t.closeByDialog}}),e("div",{staticClass:"calendar-dialog-body"},[e("calendar",{attrs:{range:t.calendar.range,zero:t.calendar.zero,lunar:t.calendar.lunar,value:t.calendar.value},on:{select:t.calendar.select}})],1)]):t._e()])],1),e("div",{staticClass:"myChart-box"},[e("div",{ref:"myChart_sku",staticClass:"myChart",staticStyle:{width:"375px",height:"360px"}})]),e("div",{staticClass:"chart-text"},[e("p",[t._v("销售总额: "+t._s(t.totalSum))]),e("p",[t._v("同期销售总额: "+t._s(t.tqTotalSum))]),e("p",[t._v("销售额增幅率: "+t._s(t.increaseRate))])])]),e("van-tab",{attrs:{title:"毛利额"}},[e("div",{staticClass:"contrast"},[e("van-tabs",{on:{click:t.profitTabClick},model:{value:t.profitActive,callback:function(a){t.profitActive=a},expression:"profitActive"}},[e("van-tab",{attrs:{title:"公历同期"}}),e("van-tab",{attrs:{title:"农历同期"}})],1)],1),e("div",{staticClass:"filters"},[e("div",{staticClass:"date-filters"},[e("input",{attrs:{type:"text",readonly:""},domProps:{value:t.calendar2.display},on:{click:function(a){return a.stopPropagation(),t.openByDialog(a)}}})]),e("transition",{attrs:{name:"fade"}},[t.calendar2.show?e("div",{staticClass:"calendar-dialog"},[e("div",{staticClass:"calendar-dialog-mask",on:{click:t.closeByDialog}}),e("div",{staticClass:"calendar-dialog-body"},[e("calendar",{attrs:{range:t.calendar2.range,zero:t.calendar2.zero,lunar:t.calendar2.lunar,value:t.calendar2.value},on:{select:t.calendar2.select}})],1)]):t._e()])],1),e("div",{staticClass:"myChart-box"},[e("div",{ref:"myChart_jjxSku",staticClass:"myChart",staticStyle:{width:"375px",height:"360px"}})]),e("div",{staticClass:"chart-text"},[e("p",[t._v("毛利总额: "+t._s(t.totalSum))]),e("p",[t._v("同期毛利总额: "+t._s(t.tqTotalSum))]),e("p",[t._v("毛利额增幅率: "+t._s(t.increaseRate))])])])],1)],1)},n=[],l=(e("4160"),e("a15b"),e("b680"),e("ac1f"),e("1276"),e("159b"),e("da3c"),e("0b33")),i=(e("bda7"),e("5e46")),r=(e("6d73"),e("473d")),o=(e("be7f"),e("565f")),c=e("2b0e"),d=e("a4ce"),u=e("ea77"),h=e("3eba"),f=e.n(h);e("ef97"),e("d28f"),e("007d");c["default"].use(l["a"]).use(i["a"]).use(r["a"]).use(o["a"]);var m={name:"SalesTrends",components:{AppHeader:d["a"],calendar:u["a"]},data:function(){var t=this;return{active:0,salesActive:0,profitActive:0,screenWidth:document.body.clientWidth,offsetTop:90/(750/document.body.clientWidth),calendar:{display:"2020/02/16 ~ 2020/03/16",show:!1,range:!0,zero:!0,value:[[2018,2,16],[2019,2,16]],lunar:!0,select:function(a,e){t.calendar_startDate=a.join("-"),t.calendar_endDate=e.join("-"),t.calendar.show=!1,t.calendar.value=[a,e],t.calendar.display=a.join("/")+" ~ "+e.join("/"),t.$nextTick((function(){t.get_salesChart()}))}},calendar2:{display:"2020/02/16 ~ 2020/03/16",show:!1,range:!0,zero:!0,value:[[2018,2,16],[2019,2,16]],lunar:!0,select:function(a,e){t.calendar2_startDate=a.join("-"),t.calendar2_endDate=e.join("-"),t.calendar2.show=!1,t.calendar2.value=[a,e],t.calendar2.display=a.join("/")+" ~ "+e.join("/"),t.$nextTick((function(){t.get_profitChart()}))}},calendar_startDate:"",calendar_endDate:"",calendar2_startDate:"",calendar2_endDate:"",getStoreInfo:"",sku_myChart:null,resultData:[],totalSum:0,tqTotalSum:0,increaseRate:0,theDay_xse:[],contemporary_tqxse:[],contemporary_nlxse:[],xse_all:0,tqxse_all:0,nlxse_all:0}},created:function(){this.get_defaultData(),this.get_data()},mounted:function(){},methods:{tabOnClick:function(t,a,e){var s=this;0==t?0==this.salesActive?this.$nextTick((function(){s.drawLine_xse(),s.totalSum=s.xse_all,s.tqTotalSum=s.tqxse_all})):1==this.salesActive&&this.$nextTick((function(){s.drawLine_nlxse(),s.totalSum=s.xse_all,s.tqTotalSum=s.nlxse_all})):1==t&&(0==this.profitActive?this.$nextTick((function(){s.drawLine_mle(),s.totalSum=s.mle_all,s.tqTotalSum=s.tqmle_all})):1==this.profitActive&&this.$nextTick((function(){s.drawLine_nlmle(),s.totalSum=s.mle_all,s.tqTotalSum=s.nlmle_all})))},salesTabClick:function(t,a,e){var s=this;0==t?this.$nextTick((function(){s.drawLine_xse(),s.totalSum=s.xse_all,s.tqTotalSum=s.tqxse_all})):1==t&&this.$nextTick((function(){s.drawLine_nlxse(),s.totalSum=s.xse_all,s.tqTotalSum=s.nlxse_all}))},profitTabClick:function(t,a,e){var s=this;0==t?this.$nextTick((function(){s.drawLine_mle(),s.totalSum=s.mle_all,s.tqTotalSum=s.tqmle_all})):1==t&&this.$nextTick((function(){s.drawLine_nlmle(),s.totalSum=s.mle_all,s.tqTotalSum=s.nlmle_all}))},get_defaultData:function(){this.getStoreInfo=this.$store.getters.getStoreInfo;var t=this.formatDate.pastDate(this.$store.state.defaultDate+1,"-"),a=this.formatDate.pastDate(2,"-");this.calendar_startDate=t,this.calendar_endDate=a,this.calendar.value=[t.split("-"),a.split("-")],this.calendar.display=this.formatDate.pastDate(this.$store.state.defaultDate+1,"-")+" ~ "+this.formatDate.pastDate(2,"-"),this.calendar2_startDate=t,this.calendar2_endDate=a,this.calendar2.value=[t.split("-"),a.split("-")],this.calendar2.display=this.formatDate.pastDate(this.$store.state.defaultDate+1,"-")+" ~ "+this.formatDate.pastDate(2,"-")},get_data:function(){var t=this;this.toast.loading({message:"加载中...",forbidClick:!0,loadingType:"spinner",duration:0}),this.dateArray=this.dateArray2=this.formatDate.dateArray(this.calendar_startDate,this.calendar_endDate);var a={storeId:this.getStoreInfo.gid,startDate:this.calendar_startDate,endDate:this.calendar_endDate};this.serverHost.fetchPost("/getReportData",a).then((function(a){t.toast.clear();var e=a.data.data,s=[],n=[],l=[],i=[],r=[],o=[];e.forEach((function(t){t.salesVolume?s.push(t.salesVolume):s.push("0"),t.salesVolumeSame?n.push(t.salesVolumeSame):n.push("0"),t.nsalesVolumeSame?l.push(t.nsalesVolumeSame):l.push("0"),t.grossMargin?i.push(t.grossMargin):i.push("0"),t.grossMarginSame?r.push(t.grossMarginSame):r.push("0"),t.ngrossMarginSame?o.push(t.ngrossMarginSame):o.push("0")})),t.resultData=e,t.theDay_xse=s,t.contemporary_tqxse=n,t.contemporary_nlxse=l;var c=0,d=0,u=0;s.forEach((function(t){c+=parseFloat(t)})),n.forEach((function(t){d+=parseFloat(t)})),l.forEach((function(t){u+=parseFloat(t)})),t.xse_all=c.toFixed(2),t.tqxse_all=d.toFixed(2),t.nlxse_all=u.toFixed(2),t.totalSum=t.xse_all,t.tqTotalSum=t.tqxse_all,t.drawLine_xse(),t.theDay_mle=i,t.contemporary_tqmle=r,t.contemporary_nlmle=o;var h=0,f=0,m=0;i.forEach((function(t){h+=parseFloat(t)})),r.forEach((function(t){f+=parseFloat(t)})),o.forEach((function(t){m+=parseFloat(t)})),t.mle_all=h.toFixed(2),t.tqmle_all=f.toFixed(2),t.nlmle_all=m.toFixed(2)})).catch((function(a){t.toast.clear(),console.log(a)}))},get_salesChart:function(){var t=this;this.toast.loading({message:"加载中...",forbidClick:!0,loadingType:"spinner",duration:0}),this.dateArray=this.formatDate.dateArray(this.calendar_startDate,this.calendar_endDate);var a={storeId:this.getStoreInfo.gid,startDate:this.calendar_startDate,endDate:this.calendar_endDate};this.serverHost.fetchPost("/getReportData",a).then((function(a){t.toast.clear();var e=a.data.data,s=[],n=[],l=[];e.forEach((function(t){t.salesVolume?s.push(t.salesVolume):s.push("0"),t.salesVolumeSame?n.push(t.salesVolumeSame):n.push("0"),t.nsalesVolumeSame?l.push(t.nsalesVolumeSame):l.push("0")})),t.resultData=e,t.theDay_xse=s,t.contemporary_tqxse=n,t.contemporary_nlxse=l;var i=0,r=0,o=0;s.forEach((function(t){i+=parseFloat(t)})),n.forEach((function(t){r+=parseFloat(t)})),l.forEach((function(t){o+=parseFloat(t)})),t.xse_all=i.toFixed(2),t.tqxse_all=r.toFixed(2),t.nlxse_all=o.toFixed(2),0==t.salesActive?t.$nextTick((function(){t.drawLine_xse(),t.totalSum=t.xse_all,t.tqTotalSum=t.tqxse_all})):t.$nextTick((function(){t.drawLine_nlxse(),t.totalSum=t.xse_all,t.tqTotalSum=t.nlxse_all}))})).catch((function(a){t.toast.clear(),console.log(a)}))},get_profitChart:function(){var t=this;this.toast.loading({message:"加载中...",forbidClick:!0,loadingType:"spinner",duration:0}),this.dateArray2=this.formatDate.dateArray(this.calendar2_startDate,this.calendar2_endDate);var a={storeId:this.getStoreInfo.gid,startDate:this.calendar2_startDate,endDate:this.calendar2_endDate};this.serverHost.fetchPost("/getReportData",a).then((function(a){t.toast.clear();var e=a.data.data,s=[],n=[],l=[];e.forEach((function(t){t.grossMargin?s.push(t.grossMargin):s.push("0"),t.grossMarginSame?n.push(t.grossMarginSame):n.push("0"),t.ngrossMarginSame?l.push(t.ngrossMarginSame):l.push("0")})),t.resultData=e,t.theDay_mle=s,t.contemporary_tqmle=n,t.contemporary_nlmle=l;var i=0,r=0,o=0;s.forEach((function(t){i+=parseFloat(t)})),n.forEach((function(t){r+=parseFloat(t)})),l.forEach((function(t){o+=parseFloat(t)})),t.mle_all=i.toFixed(2),t.tqmle_all=r.toFixed(2),t.nlmle_all=o.toFixed(2),0==t.profitActive?t.$nextTick((function(){t.drawLine_mle(),t.totalSum=t.mle_all,t.tqTotalSum=t.tqmle_all})):t.$nextTick((function(){t.drawLine_nlmle(),t.totalSum=t.mle_all,t.tqTotalSum=t.nlmle_all}))})).catch((function(a){t.toast.clear(),console.log(a)}))},openByDialog:function(){this.calendar.show=!0,this.calendar2.show=!0},closeByDialog:function(){this.calendar.show=!1,this.calendar2.show=!1},drawLine_xse:function(){var t=f.a.init(this.$refs.myChart_sku),a=this.dateArray,e=this.theDay_xse,s=this.contemporary_tqxse;t.setOption({tooltip:{trigger:"axis"},legend:{data:["销售额","同期销售额"],bottom:0,left:"center"},grid:{top:"5%",left:"3%",right:"12%",bottom:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:a},yAxis:{type:"value"},series:[{name:"销售额",type:"line",data:e},{name:"同期销售额",type:"line",data:s}]})},drawLine_nlxse:function(){var t=f.a.init(this.$refs.myChart_sku),a=this.dateArray,e=this.theDay_xse,s=this.contemporary_nlxse;t.setOption({tooltip:{trigger:"axis"},legend:{data:["销售额","同期销售额"],bottom:0,left:"center"},grid:{top:"5%",left:"3%",right:"12%",bottom:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:a},yAxis:{type:"value"},series:[{name:"销售额",type:"line",data:e},{name:"同期销售额",type:"line",data:s}]})},drawLine_mle:function(){var t=f.a.init(this.$refs.myChart_jjxSku),a=this.dateArray2,e=this.theDay_mle,s=this.contemporary_tqmle;t.setOption({tooltip:{trigger:"axis"},legend:{data:["毛利额","同期毛利额"],bottom:0,left:"center"},grid:{top:"5%",left:"3%",right:"12%",bottom:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:a},yAxis:{type:"value"},series:[{name:"毛利额",type:"line",data:e},{name:"同期毛利额",type:"line",data:s}]})},drawLine_nlmle:function(){var t=f.a.init(this.$refs.myChart_jjxSku),a=this.dateArray2,e=this.theDay_mle,s=this.contemporary_nlmle;t.setOption({tooltip:{trigger:"axis"},legend:{data:["毛利额","同期毛利额"],bottom:0,left:"center"},grid:{top:"5%",left:"3%",right:"12%",bottom:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:a},yAxis:{type:"value"},series:[{name:"毛利额",type:"line",data:e},{name:"同期毛利额",type:"line",data:s}]})}}},p=m,_=(e("a362"),e("2877")),g=Object(_["a"])(p,s,n,!1,null,"821f8580",null);a["default"]=g.exports},1148:function(t,a,e){"use strict";var s=e("a691"),n=e("1d80");t.exports="".repeat||function(t){var a=String(n(this)),e="",l=s(t);if(l<0||l==1/0)throw RangeError("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(a+=a))1&l&&(e+=a);return e}},"408a":function(t,a,e){var s=e("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=s(t))throw TypeError("Incorrect invocation");return+t}},"6ff7":function(t,a,e){},a362:function(t,a,e){"use strict";var s=e("6ff7"),n=e.n(s);n.a},b680:function(t,a,e){"use strict";var s=e("23e7"),n=e("a691"),l=e("408a"),i=e("1148"),r=e("d039"),o=1..toFixed,c=Math.floor,d=function(t,a,e){return 0===a?e:a%2===1?d(t,a-1,e*t):d(t*t,a/2,e)},u=function(t){var a=0,e=t;while(e>=4096)a+=12,e/=4096;while(e>=2)a+=1,e/=2;return a},h=o&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r((function(){o.call({})}));s({target:"Number",proto:!0,forced:h},{toFixed:function(t){var a,e,s,r,o=l(this),h=n(t),f=[0,0,0,0,0,0],m="",p="0",_=function(t,a){var e=-1,s=a;while(++e<6)s+=t*f[e],f[e]=s%1e7,s=c(s/1e7)},g=function(t){var a=6,e=0;while(--a>=0)e+=f[a],f[a]=c(e/t),e=e%t*1e7},x=function(){var t=6,a="";while(--t>=0)if(""!==a||0===t||0!==f[t]){var e=String(f[t]);a=""===a?e:a+i.call("0",7-e.length)+e}return a};if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(m="-",o=-o),o>1e-21)if(a=u(o*d(2,69,1))-69,e=a<0?o*d(2,-a,1):o/d(2,a,1),e*=4503599627370496,a=52-a,a>0){_(0,e),s=h;while(s>=7)_(1e7,0),s-=7;_(d(10,s,1),0),s=a-1;while(s>=23)g(1<<23),s-=23;g(1<<s),_(1,1),g(2),p=x()}else _(0,e),_(1<<-a,0),p=x()+i.call("0",h);return h>0?(r=p.length,p=m+(r<=h?"0."+i.call("0",h-r)+p:p.slice(0,r-h)+"."+p.slice(r-h))):p=m+p,p}})}}]);
//# sourceMappingURL=chunk-830b281a.5c9ae883.js.map